{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\baklo\\\\OneDrive\\\\Bureau\\\\file dapp\\\\FileStorage bakloul\\\\client\\\\src\\\\components\\\\Display.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Secondfile.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Display = _ref => {\n  _s();\n  let {\n    contract,\n    account\n  } = _ref;\n  const [data, setData] = useState(\"\");\n  const [showData, setShowData] = useState(false);\n  const getdata = async () => {\n    let dataArray;\n    const addressInput = document.querySelector(\".address\");\n    const Otheraddress = addressInput ? addressInput.value : \"\";\n    try {\n      if (Otheraddress) {\n        dataArray = await contract.display(Otheraddress);\n        console.log(dataArray);\n      } else {\n        dataArray = await contract.display(account);\n      }\n    } catch (e) {\n      alert(\"You don't have access\");\n    }\n    const isEmpty = Object.keys(dataArray).length === 0;\n    if (!isEmpty) {\n      const str = dataArray.toString();\n      const str_array = str.split(\",\");\n      console.log(str);\n      console.log(str_array);\n      const images = str_array.map((item, i) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete-button\",\n            onClick: () => deleteFile(i),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-trash fa-beat\",\n              style: {\n                color: \"#007bff\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 34,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: item,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `https://gateway.pinata.cloud/ipfs/${item.substring(6)}`,\n              alt: \"File\",\n              className: \"image-list\",\n              width: 300,\n              height: 300,\n              onError: e => {\n                e.target.style.display = \"none\"; // Hide the failed image\n                e.target.nextSibling.style.display = \"block\"; // Show the video tag\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n              src: `https://gateway.pinata.cloud/ipfs/${item.substring(6)}`,\n              alt: \"File\",\n              className: \"image-list\",\n              width: 200,\n              height: 150,\n              style: {\n                display: \"none\"\n              } // Initially hide the video tag\n              ,\n              controls: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 13\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this);\n      });\n      setData(images);\n      setShowData(true);\n    } else {\n      alert(\"No image to display\");\n    }\n  };\n  const deleteFile = async index => {\n    try {\n      await contract.deleteUrl(index);\n      alert(\"Image deleted successfully\");\n      getdata();\n    } catch (e) {\n      alert(\"Error deleting image\");\n    }\n  };\n  const toggleData = () => {\n    setShowData(!showData);\n  };\n  const closeContainer = () => {\n    setShowData(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"address\",\n        placeholder: \"Enter the Account address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-button\",\n        onClick: () => {\n          getdata();\n          toggleData(true);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-magnifying-glass\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), showData && data.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blank-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-grid\",\n        children: [data, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-container\",\n          onClick: closeContainer,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-sharp fa-solid fa-circle-xmark fa-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(Display, \"eO4IYo0Ap+rJ0O+cZ9N5NSvF+sc=\");\n_c = Display;\nDisplay.propTypes = {\n  contract: PropTypes.shape({\n    display: PropTypes.func,\n    // Changed from string to func\n    deleteUrl: PropTypes.func // Changed from string to func\n  }).isRequired,\n  // Added isRequired to ensure contract is provided\n  account: PropTypes.string.isRequired // Added isRequired to ensure account is provided\n};\n\nexport default Display;\nvar _c;\n$RefreshReg$(_c, \"Display\");","map":{"version":3,"names":["React","useState","PropTypes","jsxDEV","_jsxDEV","Fragment","_Fragment","Display","_ref","_s","contract","account","data","setData","showData","setShowData","getdata","dataArray","addressInput","document","querySelector","Otheraddress","value","display","console","log","e","alert","isEmpty","Object","keys","length","str","toString","str_array","split","images","map","item","i","className","children","onClick","deleteFile","style","color","fileName","_jsxFileName","lineNumber","columnNumber","href","target","rel","src","substring","alt","width","height","onError","nextSibling","controls","index","deleteUrl","toggleData","closeContainer","type","placeholder","_c","propTypes","shape","func","isRequired","string","$RefreshReg$"],"sources":["C:/Users/baklo/OneDrive/Bureau/file dapp/FileStorage bakloul/client/src/components/Display.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Secondfile.css\";\n\nconst Display = ({ contract, account }) => {\n  const [data, setData] = useState(\"\");\n  const [showData, setShowData] = useState(false);\n\n  const getdata = async () => {\n    let dataArray;\n    const addressInput = document.querySelector(\".address\");\n    const Otheraddress = addressInput ? addressInput.value : \"\";\n    try {\n      if (Otheraddress) {\n        dataArray = await contract.display(Otheraddress);\n        console.log(dataArray);\n      } else {\n        dataArray = await contract.display(account);\n      }\n    } catch (e) {\n      alert(\"You don't have access\");\n    }\n    const isEmpty = Object.keys(dataArray).length === 0;\n\n    if (!isEmpty) {\n      const str = dataArray.toString();\n      const str_array = str.split(\",\");\n      console.log(str);\n      console.log(str_array);\n      const images = str_array.map((item, i) => {\n        return (\n          <div key={i} className=\"image-container\">\n            <button className=\"delete-button\" onClick={() => deleteFile(i)}>\n              <i className=\"fa-solid fa-trash fa-beat\" style={{ color: \"#007bff\" }}></i>\n            </button>\n            <a href={item} target=\"_blank\" rel=\"noreferrer\">\n              <img\n                src={`https://gateway.pinata.cloud/ipfs/${item.substring(6)}`}\n                alt=\"File\"\n                className=\"image-list\"\n                width={300}\n                height={300}\n                onError={(e) => {\n                  e.target.style.display = \"none\"; // Hide the failed image\n                  e.target.nextSibling.style.display = \"block\"; // Show the video tag\n                }}\n              />\n              <video\n                src={`https://gateway.pinata.cloud/ipfs/${item.substring(6)}`}\n                alt=\"File\"\n                className=\"image-list\"\n                width={200}\n                height={150}\n                style={{ display: \"none\" }} // Initially hide the video tag\n                controls\n              />\n            </a>\n          </div>\n        );\n      });\n\n      setData(images);\n      setShowData(true);\n    } else {\n      alert(\"No image to display\");\n    }\n  };\n\n  const deleteFile = async (index) => {\n    try {\n      await contract.deleteUrl(index);\n      alert(\"Image deleted successfully\");\n      getdata();\n    } catch (e) {\n      alert(\"Error deleting image\");\n    }\n  };\n\n  const toggleData = () => {\n    setShowData(!showData);\n  };\n\n  const closeContainer = () => {\n    setShowData(false);\n  };\n\n  return (\n    <>\n      <div className=\"search-bar\">\n        <input\n          type=\"text\"\n          className=\"address\"\n          placeholder=\"Enter the Account address\"\n        />\n        <button\n          className=\"search-button\"\n          onClick={() => {\n            getdata();\n            toggleData(true);\n          }}\n        >\n          <i className=\"fa-solid fa-magnifying-glass\"></i>\n        </button>\n      </div>\n      {showData && data.length > 0 && (\n        <div className=\"blank-container\">\n          <div className=\"image-grid\">\n            {data}\n            <button className=\"close-container\" onClick={closeContainer}>\n              <i className=\"fa-sharp fa-solid fa-circle-xmark fa-2xl\"></i>\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nDisplay.propTypes = {\n  contract: PropTypes.shape({\n    display: PropTypes.func, // Changed from string to func\n    deleteUrl: PropTypes.func, // Changed from string to func\n  }).isRequired, // Added isRequired to ensure contract is provided\n  account: PropTypes.string.isRequired, // Added isRequired to ensure account is provided\n};\n\nexport default Display;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}